<!DOCTYPE html>
<html>
<head>
    <title>Smart Notes</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="main-container">

    <div class="card">
        <h2>ðŸ“¤ Smart Notes Generator</h2>

        <select id="branch">
            <option>AIML</option>
            <option>CSE</option>
            <option>ECE</option>
        </select>

        <select id="subject">
            <option>Machine Learning</option>
            <option>DBMS</option>
            <option>Computer Networks</option>
            <option>Operating System</option>
        </select>

        <input type="file" id="file">

        <button onclick="uploadFile()">Generate Notes</button>

        <div class="result-box">
            <h3>âœ¨ Summary</h3>
            <p id="summary"></p>

            <h3>ðŸ“˜ Generated Questions</h3>
            <ul id="questions"></ul>
        </div>

        <button class="pdf-btn" onclick="window.location.href='/download_pdf'">
            ðŸ“„ Download Result as PDF
        </button>

        <div class="links">
            <a href="/dashboard">View History</a> |
            <a href="/logout">Logout</a>
        </div>
    </div>

</div>

<script>
function uploadFile(){
    const file = document.getElementById("file").files[0];
    const branch = document.getElementById("branch").value;
    const subject = document.getElementById("subject").value;

    const formData = new FormData();
    formData.append("file", file);
    formData.append("branch", branch);
    formData.append("subject", subject);

    fetch("/upload", {
        method: "POST",
        body: formData
    })
    .then(res => res.json())
    .then(data => {

        document.getElementById("summary").innerText =
            "Branch: " + data.branch +
            "\nSubject: " + data.subject +
            "\n\n" + data.summary;

        const qList = document.getElementById("questions");
        qList.innerHTML = "";

        data.questions.forEach(q => {
            const li = document.createElement("li");
            li.innerText = q;
            qList.appendChild(li);
        });
    });
}
</script>

</body>
</html>
